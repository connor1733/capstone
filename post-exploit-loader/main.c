#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <fcntl.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>


int main(){ 
  int s = socket(AF_INET, SOCK_STREAM, 0);

  struct sockaddr_in server;
  memset((void *) &server, 0, sizeof(server));
  server.sin_family= AF_INET;
  server.sin_port = htons(54321);
  server.sin_addr.s_addr = inet_addr("127.0.0.1");

  puts("here\n");
  char *dump = (char *) &server;

  printf("sizeof(server) %lu\n", sizeof(server));

  connect(s, (struct sockaddr *) &server, 16);

  char *string = "/data/local/tmp/.pq281";
  int len = strlen(string);

  for(int i = 0; i < len + 4; i++){
    printf("address %p: value: %02x\n", string+i, string[i]);
  }

  printf("O_CREAT|O_TRUNC|O_RDWR: %d\n", O_CREAT|O_TRUNC|O_RDWR);
  printf("S_IRWXU: %d\n", S_IRWXU);
  printf("AT_FDCWD: %x\n", AT_FDCWD);

  printf("\n");

  int fd = openat(AT_FDCWD, "pdad", O_CREAT|O_TRUNC|O_RDWR, S_IRWXU);
  printf("%d\n", fd);

  return 0;
}
